{% extends 'base.html' %}

{% block title %}AI Coding Assistant - SN VERSE{% endblock %}

{% block head %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/rust.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/ruby.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/swift.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/kotlin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/scss.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/dockerfile.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.3/purify.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        .ai-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header-section {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .header-section h1 {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #00d4ff, #090979, #00ff88, #4ecdc4);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease infinite;
            margin-bottom: 20px;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header-section p {
            font-size: 1.2rem;
            color: #b0b0b0;
            max-width: 600px;
            margin: 0 auto;
        }

        .chat-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .chat-messages {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 15px;
            position: relative;
            animation: messageSlideIn 0.3s ease-out;
        }

        @keyframes messageSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin-left: 100px;
            border-bottom-right-radius: 5px;
        }

        .message.ai {
            
            margin-right: 100px;
            border-bottom-left-radius: 5px;
        }

        .message .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 15px;
            vertical-align: top;
        }

        .message .content {
            display: inline-block;
            max-width: calc(100% - 60px);
            word-wrap: break-word;
        }

        .message pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 0;
            border-radius: 10px;
            overflow-x: auto;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .code-container {
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .code-header {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85em;
            color: #b0b0b0;
        }

        .code-content {
            display: flex;
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .line-numbers {
            background: rgba(0, 0, 0, 0.4);
            color: #888;
            padding: 15px 10px 15px 15px;
            text-align: right;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            user-select: none;
            min-width: 40px;
        }

        .code-text {
            padding: 15px;
            flex: 1;
            white-space: pre;
            overflow-x: auto;
            color: #e0e0e0;
        }

        .code-text code {
            background: transparent;
            padding: 0;
            border-radius: 0;
            font-family: inherit;
            font-size: inherit;
            color: inherit;
        }

        .copy-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            margin-left: 10px;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .copy-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .copy-button i {
            font-size: 0.9em;
        }

        .input-container {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .input-group {
            flex: 1;
        }

        .message-input {
            width: 100%;
            min-height: 50px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-size: 1rem;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .message-input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
            background: rgba(255, 255, 255, 0.08);
        }

        .send-button {
            background: linear-gradient(45deg, #00d4ff, #090979);
            border: none;
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
        }

        .send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .language-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .language-selector select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 1rem;
        }

        .language-selector select:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        .typing-indicator {
            display: none;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .typing-dots {
            display: inline-block;
        }

        .typing-dots span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00d4ff;
            animation: typing 1.4s infinite;
            margin: 0 2px;
        }

        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .error-message {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .features-section {
            margin-top: 60px;
            text-align: center;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .feature-icon {
            font-size: 3rem;
            color: #00d4ff;
            margin-bottom: 20px;
        }

        .feature-card h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .feature-card p {
            color: #b0b0b0;
            font-size: 0.95rem;
        }

        @media (max-width: 768px) {
            .header-section h1 {
                font-size: 2.5rem;
            }

            .chat-container {
                padding: 20px;
            }

            .chat-messages {
                height: 400px;
            }

            .message.user {
                margin-left: 20px;
            }

            .message.ai {
                margin-right: 20px;
            }

            .input-container {
                flex-direction: column;
            }

            .send-button {
                width: 100%;
                margin-top: 10px;
            }
        }

        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(45deg, #00d4ff, #090979);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .scroll-to-top:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
        }
    </style>
{% endblock %}

{% block content %}
<div class="ai-container">
    <div class="header-section">
        <h1>🤖 AI Coding Assistant</h1>
        <p>Get instant help with coding questions, debugging, code generation, and technical explanations across multiple programming languages.</p>
    </div>

    <div class="chat-container">
        <div class="language-selector">
            <select id="language-select">
                <option value="auto" selected>Auto</option>
                <option value="python">Python</option>
                <option value="javascript">JavaScript</option>
                <option value="java">Java</option>
                <option value="cpp">C++</option>
                <option value="csharp">C#</option>
                <option value="php">PHP</option>
                <option value="go">Go</option>
                <option value="rust">Rust</option>
                <option value="ruby">Ruby</option>
                <option value="swift">Swift</option>
                <option value="kotlin">Kotlin</option>
                <option value="typescript">TypeScript</option>
                <option value="bash">Bash/Shell</option>
                <option value="sql">SQL</option>
                <option value="html">HTML</option>
                <option value="css">CSS</option>
                <option value="json">JSON</option>
                <option value="xml">XML</option>
                <option value="yaml">YAML</option>
                <option value="dockerfile">Docker</option>
            </select>
        </div>

        <div id="chat-messages" class="chat-messages">
            <div class="message ai">
                <div class="avatar" style="background: linear-gradient(45deg, #00d4ff, #090979);">
                    <i class="fas fa-robot" style="color: white; font-size: 20px; margin-top: 10px; margin-left: 10px;"></i>
                </div>
                <div class="content">
                    <strong>AI Assistant:</strong> Hello! I'm your AI coding assistant. I can help you with:
                    <ul>
                        <li>Writing and debugging code</li>
                        <li>Explaining programming concepts</li>
                        <li>Code optimization and best practices</li>
                        <li>Technical questions and tutorials</li>
                        <li>Multi-language support</li>
                    </ul>
                    What would you like to work on today?
                </div>
            </div>
        </div>

        <div id="typing-indicator" class="typing-indicator">
            <div class="avatar" style="background: linear-gradient(45deg, #00d4ff, #090979);">
                <i class="fas fa-robot" style="color: white; font-size: 20px; margin-top: 10px; margin-left: 10px;"></i>
            </div>
            <div class="content">
                <strong>AI Assistant is typing</strong>
                <div class="typing-dots">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>

        <div id="error-message" class="error-message" style="display: none;"></div>

        <div class="input-container">
            <div class="input-group">
                <textarea
                    id="message-input"
                    class="message-input"
                    placeholder="Ask me anything about coding... (e.g., 'Write a Python function to reverse a string')"
                    rows="1"
                ></textarea>
            </div>
            <button id="send-button" class="send-button">
                <i class="fas fa-paper-plane"></i> Send
            </button>
        </div>
    </div>

    <div class="features-section">
        <h2 style="color: white; margin-bottom: 20px;">✨ Features</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-code"></i>
                </div>
                <h3>Code Generation</h3>
                <p>Generate clean, efficient code snippets in multiple programming languages with proper syntax highlighting.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bug"></i>
                </div>
                <h3>Debugging Help</h3>
                <p>Get assistance with identifying and fixing bugs in your code with detailed explanations.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-book"></i>
                </div>
                <h3>Learning Support</h3>
                <p>Learn new concepts, best practices, and advanced techniques across different technologies.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-language"></i>
                </div>
                <h3>Multi-Language</h3>
                <p>Support for 20+ programming languages including Python, JavaScript, Java, C++, and more.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-copy"></i>
                </div>
                <h3>Copy & Paste</h3>
                <p>Easy copy functionality for all code snippets with one-click copying to clipboard.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-history"></i>
                </div>
                <h3>Conversation History</h3>
                <p>Maintain context throughout our conversation for better, more relevant assistance.</p>
            </div>
        </div>
    </div>
</div>

<button class="scroll-to-top" id="scroll-to-top" style="display: none;">
    <i class="fas fa-arrow-up"></i>
</button>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const chatMessages = document.getElementById('chat-messages');
        const typingIndicator = document.getElementById('typing-indicator');
        const errorMessage = document.getElementById('error-message');
        const languageSelect = document.getElementById('language-select');
        const scrollToTopBtn = document.getElementById('scroll-to-top');

        let conversationHistory = [];

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 150) + 'px';
        });

        // Send message on Enter (but allow Shift+Enter for new lines)
        messageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Send button click
        sendButton.addEventListener('click', sendMessage);

        // Scroll to top functionality
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.style.display = 'block';
            } else {
                scrollToTopBtn.style.display = 'none';
            }
        });

        scrollToTopBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage('user', message);
            messageInput.value = '';
            messageInput.style.height = 'auto';

            // Show typing indicator
            typingIndicator.style.display = 'block';
            sendButton.disabled = true;

            // Add to conversation history
            conversationHistory.push({ role: 'user', content: message });

            try {
                // Prepare the payload for Groq API
                const selectedLanguage = languageSelect.value;
                const systemPrompt = selectedLanguage === 'auto'
                    ? `You are an expert coding assistant with knowledge across multiple programming languages. Provide clear, accurate, and helpful responses. When writing code, use proper syntax highlighting and explain your solutions. Be concise but thorough.`
                    : `You are an expert coding assistant specializing in ${selectedLanguage}. Provide clear, accurate, and helpful responses. When writing code, use proper syntax highlighting and explain your solutions. Be concise but thorough.`;

                const payload = {
                    model: 'llama-3.1-8b-instant',
                    messages: [
                        { role: 'system', content: systemPrompt },
                        ...conversationHistory.slice(-10) // Keep last 10 messages for context
                    ],
                    max_tokens: 2048,
                    temperature: 0.7
                };

                // Groq API integration
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${window.GROQ_API_KEY}`
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.choices[0].message.content;

                // Add AI response
                addMessage('ai', aiResponse);

                // Add to conversation history
                conversationHistory.push({ role: 'assistant', content: aiResponse });

            } catch (error) {
                console.error('Error:', error);
                showError('Sorry, I encountered an error. Please try again later.');
            } finally {
                // Hide typing indicator
                typingIndicator.style.display = 'none';
                sendButton.disabled = false;
            }
        }

        function addMessage(type, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;

            const avatar = type === 'user' ?
                '<div class="avatar" style="background: linear-gradient(45deg, #667eea, #764ba2);"><i class="fas fa-user" style="color: white; font-size: 20px; margin-top: 10px; margin-left: 10px;"></i></div>' :
                '<div class="avatar" style="background: linear-gradient(45deg, #00d4ff, #090979);"><i class="fas fa-robot" style="color: white; font-size: 20px; margin-top: 10px; margin-left: 10px;"></i></div>';

            const sender = type === 'user' ? 'You:' : 'AI Assistant:';

            messageDiv.innerHTML = `
                ${avatar}
                <div class="content">
                    <strong>${sender}</strong> ${formatMessage(content)}
                </div>
            `;

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Enhance code blocks with IDE-like features
            messageDiv.querySelectorAll('pre code').forEach((block) => {
                enhanceCodeBlock(block);
            });
        }

        function enhanceCodeBlock(block) {
            const pre = block.parentNode;
            const code = block.textContent;
            const lines = code.split('\n');

            // Detect language from class or use default
            const language = block.className.match(/language-(\w+)/)?.[1] || 'text';

            // Create enhanced code container
            const container = document.createElement('div');
            container.className = 'code-container';

            // Create header
            const header = document.createElement('div');
            header.className = 'code-header';
            header.innerHTML = `
                <span><i class="fas fa-code"></i> ${language.toUpperCase()}</span>
                <button class="copy-button" onclick="copyToClipboard('${code.replace(/'/g, "\\'").replace(/\n/g, '\\n').replace(/\r/g, '')}', this)">
                    <i class="fas fa-copy"></i> Copy
                </button>
            `;

            // Create content with line numbers
            const content = document.createElement('div');
            content.className = 'code-content';

            // Line numbers
            const lineNumbers = document.createElement('div');
            lineNumbers.className = 'line-numbers';
            lineNumbers.innerHTML = lines.map((_, i) => `<div>${i + 1}</div>`).join('');

            // Code text
            const codeText = document.createElement('div');
            codeText.className = 'code-text';
            codeText.innerHTML = `<code class="language-${language}">${escapeHtml(code)}</code>`;

            content.appendChild(lineNumbers);
            content.appendChild(codeText);

            container.appendChild(header);
            container.appendChild(content);

            // Replace original pre with enhanced container
            pre.parentNode.replaceChild(container, pre);

            // Apply syntax highlighting
            hljs.highlightElement(codeText.querySelector('code'));
        }

        function formatMessage(content) {
            // Convert markdown-style code blocks to HTML
            content = content.replace(/```(\w+)?\n?([\s\S]*?)```/g, (match, lang, code) => {
                const language = lang || '';
                return `<pre><code class="language-${language}">${escapeHtml(code.trim())}</code></pre>`;
            });

            // Convert inline code
            content = content.replace(/`([^`]+)`/g, '<code>$1</code>');

            // Convert line breaks
            content = content.replace(/\n/g, '<br>');

            return content;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
        }

        // Initialize syntax highlighting
        hljs.configure({
            languages: ['javascript', 'python', 'java', 'cpp', 'csharp', 'php', 'go', 'rust', 'ruby', 'swift', 'kotlin', 'typescript', 'bash', 'sql', 'html', 'css', 'json', 'xml', 'yaml', 'dockerfile']
        });
    });
</script>
{% endblock %}
