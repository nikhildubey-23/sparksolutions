{% extends 'base.html' %}

{% block title %}React Docs - Spark Solutions{% endblock %}

{% block head %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.3/purify.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
{% endblock %}

{% block content %}
    <!-- React Docs Page -->
    <section class="docs-page py-5">
        <div class="container-fluid">
            <div class="row">
                <!-- Documentation Content -->
                <div class="col-md-12">
                    <!-- Search Box -->
                    <div class="search-container mb-4">
                        <input type="text" id="search-input" class="form-control" placeholder="Search documentation...">
                    </div>
                    <div id="content">
                        <h2 class="mb-4">React Documentation</h2>
                        <p>Welcome to the comprehensive React documentation. Here, you'll find detailed guides and tutorials for building modern web applications with React.</p>

                        <h3 id="introduction" class="mt-5">Introduction to React</h3>
                        <p>React is a JavaScript library for building user interfaces, particularly single-page applications where you need a fast, interactive UI. It was developed by Facebook and is maintained by Facebook and a community of individual developers and companies.</p>
                        <p>Key features of React:</p>
                        <ul>
                            <li><strong>Component-Based</strong> - Build encapsulated components that manage their own state</li>
                            <li><strong>Virtual DOM</strong> - Efficient updates through a virtual DOM representation</li>
                            <li><strong>Unidirectional Data Flow</strong> - Data flows from parent to child components</li>
                            <li><strong>JSX</strong> - JavaScript XML syntax for writing components</li>
                            <li><strong>Ecosystem</strong> - Rich ecosystem of tools and libraries</li>
                        </ul>

                        <h3 id="setup" class="mt-5">Setup and Installation</h3>
                        <p>There are several ways to set up a React project:</p>

                        <h4>Create React App</h4>
                        <p>The easiest way to start a new React application:</p>
                        <pre><button class="copy-button">Copy</button><code class="language-bash">{% raw %}
# Create a new React app
npx create-react-app my-app
cd my-app

# Start the development server
npm start

# Build for production
npm run build
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>Vite (Modern Alternative)</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-bash">{% raw %}
# Create a new React app with Vite
npm create vite@latest my-react-app -- --template react
cd my-react-app

# Install dependencies
npm install

# Start development server
npm run dev
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="jsx" class="mt-5">JSX - JavaScript XML</h3>
                        <p>JSX is a syntax extension for JavaScript that allows you to write HTML-like code in your JavaScript files. It makes React components more readable and expressive.</p>

                        <h4>Basic JSX Syntax</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
// JSX element
const element = <h1>Hello, World!</h1>;

// JSX with expressions
const name = "John";
const element = <h1>Hello, {name}</h1>;

// JSX with attributes
const element = <img src={user.avatarUrl} alt={user.name} />;

// JSX represents objects
const element = (
  <h1 className="greeting">
    Hello, world!
  </h1>
);
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="components" class="mt-5">Components</h3>
                        <p>Components are the building blocks of React applications. They let you split the UI into independent, reusable pieces.</p>

                        <h4>Function Components</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
// Simple function component
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

// Using the component
function App() {
  return (
    <div>
      <Welcome name="Alice" />
      <Welcome name="Bob" />
      <Welcome name="Charlie" />
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="state" class="mt-5">State</h3>
                        <p>State is a built-in object that stores property values that belong to a component. When state changes, the component re-renders.</p>

                        <h4>useState Hook</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="hooks" class="mt-5">React Hooks</h3>
                        <p>Hooks are functions that let you "hook into" React state and lifecycle features from function components.</p>

                        <h4>useEffect Hook</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { useState, useEffect } from 'react';

function DataFetcher() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetch('https://api.example.com/data')
      .then(response => response.json())
      .then(data => {
        setData(data);
        setLoading(false);
      });
  }, []);

  if (loading) return <div>Loading...</div>;
  return <div>{JSON.stringify(data)}</div>;
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="events" class="mt-5">Event Handling</h3>
                        <p>React events are handled using camelCase syntax and pass functions as event handlers.</p>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
function ButtonExample() {
  const handleClick = () => {
    alert('Button clicked!');
  };

  return (
    <button onClick={handleClick}>
      Click me
    </button>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="conditional-rendering" class="mt-5">Conditional Rendering</h3>
                        <p>React allows you to render different components or elements based on certain conditions.</p>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
function Greeting({ isLoggedIn }) {
  if (isLoggedIn) {
    return <h1>Welcome back!</h1>;
  }
  return <h1>Please sign in.</h1>;
}

// Using ternary operator
function Greeting({ isLoggedIn }) {
  return (
    <div>
      {isLoggedIn ? <h1>Welcome back!</h1> : <h1>Please sign in.</h1>}
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="lists-and-keys" class="mt-5">Lists and Keys</h3>
                        <p>Lists can be rendered in React using the JavaScript map() method. Keys help React identify which items have changed.</p>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
function NumberList({ numbers }) {
  return (
    <ul>
      {numbers.map((number) =>
        <li key={number.toString()}>
          {number}
        </li>
      )}
    </ul>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="forms" class="mt-5">Forms</h3>
                        <p>Forms in React can be controlled or uncontrolled. Controlled components are recommended for most use cases.</p>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
function NameForm() {
  const [value, setValue] = useState('');

  const handleChange = (event) => {
    setValue(event.target.value);
  };

  const handleSubmit = (event) => {
    alert('A name was submitted: ' + value);
    event.preventDefault();
  };

  return (
    <form onSubmit={handleSubmit}>
      <label>
        Name:
        <input 
          type="text" 
          value={value}
          onChange={handleChange}
        />
      </label>
      <input type="submit" value="Submit" />
    </form>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="routing" class="mt-5">Routing with React Router</h3>
                        <p>React Router is the standard routing library for React. It enables navigation between different components.</p>

                        <pre><button class="copy-button">Copy</button><code class="language-bash">{% raw %}
# Install React Router
npm install react-router-dom
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React from 'react';
import { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';

function Home() {
  return <h2>Home Page</h2>;
}

function About() {
  return <h2>About Page</h2>;
}

function App() {
  return (
    <Router>
      <div>
        <nav>
          <ul>
            <li><Link to="/">Home</Link></li>
            <li><Link to="/about">About</Link></li>
          </ul>
        </nav>

        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
        </Routes>
      </div>
    </Router>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="performance" class="mt-5">Performance Optimization</h3>
                        <p>Optimizing React applications ensures smooth user experience and efficient resource usage.</p>

                        <h4>React.memo</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React from 'react';

const MemoizedComponent = React.memo(function MemoizedComponent({ name }) {
  console.log('MemoizedComponent rendered');
  return <div>Hello, {name}!</div>;
});

// Usage
function Parent() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState('John');

  return (
    <div>
      <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      <MemoizedComponent name={name} />
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>useMemo and useCallback</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { useState, useMemo, useCallback } from 'react';

function ExpensiveComponent({ data }) {
  const processedData = useMemo(() => {
    console.log('Processing data...');
    return data.map(item => item * 2);
  }, [data]);

  const handleClick = useCallback((id) => {
    console.log('Item clicked:', id);
  }, []);

  return (
    <div>
      {processedData.map(item => (
        <div key={item} onClick={() => handleClick(item)}>
          {item}
        </div>
      ))}
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>Code Splitting</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { Suspense, lazy } from 'react';

// Lazy loading components
const Home = lazy(() => import('./components/Home'));
const About = lazy(() => import('./components/About'));

function App() {
  return (
    <div>
      <Suspense fallback={<div>Loading...</div>}>
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
        </Routes>
      </Suspense>
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="testing" class="mt-5">Testing React Applications</h3>
                        <p>Testing ensures your React components work as expected and helps prevent regressions.</p>

                        <h4>Setting up Testing Environment</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-bash">{% raw %}
# Install testing libraries
npm install --save-dev @testing-library/react @testing-library/jest-dom @testing-library/user-event jest
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>Component Testing</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import '@testing-library/jest-dom';

// Component to test
function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p data-testid="count">Count: {count}</p>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}

// Test file
describe('Counter', () => {
  test('renders initial count', () => {
    render(<Counter />);
    expect(screen.getByTestId('count')).toHaveTextContent('Count: 0');
  });

  test('increments count when button is clicked', () => {
    render(<Counter />);
    const incrementButton = screen.getByText('Increment');
    
    fireEvent.click(incrementButton);
    
    expect(screen.getByTestId('count')).toHaveTextContent('Count: 1');
  });
});
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="best-practices" class="mt-5">React Best Practices</h3>

                        <h4>Component Structure</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
// Good: Single responsibility principle
function UserAvatar({ user, size }) {
  return (
    <img 
      src={user.avatarUrl} 
      alt={user.name}
      width={size}
      height={size}
    />
  );
}

function UserProfile({ user }) {
  return (
    <div className="user-profile">
      <UserAvatar user={user} size={50} />
      <h2>{user.name}</h2>
      <p>{user.email}</p>
    </div>
  );
}

// Good: Custom hooks for logic reuse
function useApi(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetch(url)
      .then(response => response.json())
      .then(data => {
        setData(data);
        setLoading(false);
      })
      .catch(error => {
        setError(error);
        setLoading(false);
      });
  }, [url]);

  return { data, loading, error };
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>State Management Best Practices</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
// Good: Lift state up when needed
function Parent() {
  const [sharedState, setSharedState] = useState('initial');

  return (
    <div>
      <ChildA value={sharedState} onChange={setSharedState} />
      <ChildB value={sharedState} />
    </div>
  );
}

// Good: Use context for truly global state
const ThemeContext = createContext();

function App() {
  const [theme, setTheme] = useState('light');

  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      <Header />
      <Main />
    </ThemeContext.Provider>
  );
}

// Good: Keep state close to where it's used
function TodoItem({ todo, onToggle, onDelete }) {
  const [isEditing, setIsEditing] = useState(false); // Local state
  
  // Component logic...
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>Performance Best Practices</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
// Good: Use React.memo for expensive components
const ExpensiveComponent = React.memo(function ExpensiveComponent({ data }) {
  return (
    <div>
      {data.map(item => (
        <ComplexItem key={item.id} item={item} />
      ))}
    </div>
  );
});

// Good: Use useMemo for expensive calculations
function DataProcessor({ rawData }) {
  const processedData = useMemo(() => {
    return rawData.map(item => ({
      ...item,
      computed: expensiveCalculation(item)
    }));
  }, [rawData]);

  return <DataList data={processedData} />;
}

// Good: Use useCallback for stable function references
function Parent({ items }) {
  const [selectedId, setSelectedId] = useState(null);

  const handleSelect = useCallback((id) => {
    setSelectedId(id);
  }, []);

  return (
    <div>
      {items.map(item => (
        <Item 
          key={item.id}
          item={item}
          onSelect={handleSelect}
          isSelected={selectedId === item.id}
        />
      ))}
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>Code Organization</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
// Good: Organize by feature
src/
├── components/
│   ├── common/
│   │   ├── Button/
│   │   │   ├── Button.jsx
│   │   │   ├── Button.module.css
│   │   │   └── index.js
│   │   └── Input/
│   └── features/
│       ├── UserProfile/
│       │   ├── UserProfile.jsx
│       │   ├── UserProfile.module.css
│       │   └── index.js
│       └── TodoList/
├── hooks/
│   ├── useApi.js
│   ├── useLocalStorage.js
│   └── index.js
├── context/
│   ├── ThemeContext.js
│   └── index.js
├── utils/
│   ├── helpers.js
│   └── constants.js
└── services/
    ├── api.js
    └── auth.js

// Good: Use barrel exports
// components/common/Button/index.js
export { default } from './Button';
export { ButtonSizes } from './Button.constants';
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="patterns" class="mt-5">Advanced React Patterns</h3>

                        <h4>Compound Components</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { createContext, useContext } from 'react';

const ToggleContext = createContext();

function Toggle({ children, onToggle }) {
  const [on, setOn] = useState(false);

  const toggle = () => {
    const newOn = !on;
    setOn(newOn);
    onToggle(newOn);
  };

  return (
    <ToggleContext.Provider value={{ on, toggle }}>
      {children}
    </ToggleContext.Provider>
  );
}

function useToggle() {
  const context = useContext(ToggleContext);
  if (!context) {
    throw new Error('useToggle must be used within a Toggle');
  }
  return context;
}

Toggle.On = function ToggleOn({ children }) {
  const { on } = useToggle();
  return on ? children : null;
};

Toggle.Off = function ToggleOff({ children }) {
  const { on } = useToggle();
  return on ? null : children;
};

Toggle.Button = function ToggleButton(props) {
  const { on, toggle } = useToggle();
  return <button onClick={toggle} {...props} />;
};

// Usage
function App() {
  return (
    <Toggle onToggle={on => console.log(on)}>
      <Toggle.On>The button is on</Toggle.On>
      <Toggle.Off>The button is off</Toggle.Off>
      <Toggle.Button>Toggle</Toggle.Button>
    </Toggle>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>Render Props Pattern</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
function MouseTracker({ render }) {
  const [position, setPosition] = useState({ x: 0, y: 0 });

  const handleMouseMove = (event) => {
    setPosition({
      x: event.clientX,
      y: event.clientY
    });
  };

  return (
    <div onMouseMove={handleMouseMove}>
      {render(position)}
    </div>
  );
}

// Usage
function App() {
  return (
    <MouseTracker
      render={({ x, y }) => (
        <h1>Mouse position: ({x}, {y})</h1>
      )}
    />
  );
}

// Alternative: Using children as function
function MouseTracker({ children }) {
  const [position, setPosition] = useState({ x: 0, y: 0 });

  const handleMouseMove = (event) => {
    setPosition({
      x: event.clientX,
      y: event.clientY
    });
  };

  return (
    <div onMouseMove={handleMouseMove}>
      {children(position)}
    </div>
  );
}

// Usage
function App() {
  return (
    <MouseTracker>
      {({ x, y }) => (
        <h1>Mouse position: ({x}, {y})</h1>
      )}
    </MouseTracker>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>Higher-Order Components (HOC)</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
function withLoading(Component) {
  return function WithLoadingComponent({ isLoading, ...props }) {
    if (isLoading) {
      return <div>Loading...</div>;
    }
    return <Component {...props} />;
  };
}

function withError(Component) {
  return function WithErrorComponent({ error, ...props }) {
    if (error) {
      return <div>Error: {error.message}</div>;
    }
    return <Component {...props} />;
  };
}

// Usage
function DataComponent({ data }) {
  return <div>{JSON.stringify(data)}</div>;
}

const EnhancedDataComponent = withError(withLoading(DataComponent));

function App() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetch('https://api.example.com/data')
      .then(response => response.json())
      .then(data => {
        setData(data);
        setLoading(false);
      })
      .catch(error => {
        setError(error);
        setLoading(false);
      });
  }, []);

  return (
    <EnhancedDataComponent 
      data={data}
      loading={loading}
      error={error}
    />
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="custom-hooks-examples" class="mt-5">More Custom Hooks Examples</h3>

                        <h4>useLocalStorage Hook</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import { useState, useEffect } from 'react';

function useLocalStorage(key, initialValue) {
  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(error);
      return initialValue;
    }
  });

  const setValue = (value) => {
    try {
      setStoredValue(value);
      window.localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error(error);
    }
  };

  return [storedValue, setValue];
}

// Usage
function App() {
  const [name, setName] = useLocalStorage('name', 'John');

  return (
    <div>
      <input 
        type="text"
        value={name}
        onChange={(e) => setName(e.target.value)}
        placeholder="Name"
      />
      <p>Hello, {name}!</p>
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>useDebounce Hook</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import { useState, useEffect } from 'react';

function useDebounce(value, delay) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}

// Usage
function SearchComponent() {
  const [searchTerm, setSearchTerm] = useState('');
  const debouncedSearchTerm = useDebounce(searchTerm, 500);

  useEffect(() => {
    if (debouncedSearchTerm) {
      // Perform API call with debouncedSearchTerm
      console.log('Searching for:', debouncedSearchTerm);
    }
  }, [debouncedSearchTerm]);

  return (
    <div>
      <input 
        type="text"
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        placeholder="Search..."
      />
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h4>usePrevious Hook</h4>
                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import { useRef, useEffect } from 'react';

function usePrevious(value) {
  const ref = useRef();
  useEffect(() => {
    ref.current = value;
  });
  return ref.current;
}

// Usage
function Counter() {
  const [count, setCount] = useState(0);
  const prevCount = usePrevious(count);

  return (
    <div>
      <h1>Now: {count}, before: {prevCount}</h1>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="error-boundaries" class="mt-5">Error Boundaries</h3>
                        <p>Error boundaries are React components that catch JavaScript errors in their child component tree, log those errors, and display a fallback UI.</p>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { Component } from 'react';

class ErrorBoundary extends Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  componentDidCatch(error, errorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return <h1>Something went wrong.</h1>;
    }

    return this.props.children;
  }
}

// Usage
function App() {
  return (
    <ErrorBoundary>
      <MyComponent />
    </ErrorBoundary>
  );
}

// Functional Error Boundary (using a pattern)
function useErrorHandler() {
  const [error, setError] = useState(null);

  const resetError = () => setError(null);

  const catchError = (error) => {
    setError(error);
  };

  useEffect(() => {
    if (error) {
      throw error;
    }
  }, [error]);

  return { catchError, resetError };
}

function ErrorBoundary({ children }) {
  const { catchError, resetError } = useErrorHandler();

  return (
    <div>
      {children}
      <button onClick={resetError}>Reset Error</button>
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="portals" class="mt-5">Portals</h3>
                        <p>Portals provide a way to render children into a DOM node that exists outside the hierarchy of the parent component.</p>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { createPortal } from 'react';
import ReactDOM from 'react-dom';

function Modal({ children, isOpen }) {
  if (!isOpen) return null;

  return createPortal(
    <div className="modal-overlay">
      <div className="modal">
        {children}
      </div>
    </div>,
    document.getElementById('modal-root')
  );
}

// Usage
function App() {
  const [isModalOpen, setIsModalOpen] = useState(false);

  return (
    <div>
      <button onClick={() => setIsModalOpen(true)}>
        Open Modal
      </button>
      
      <Modal isOpen={isModalOpen}>
        <h2>Modal Content</h2>
        <button onClick={() => setIsModalOpen(false)}>
          Close Modal
        </button>
      </Modal>
    </div>
  );
}

// In your HTML file
// <div id="root"></div>
// <div id="modal-root"></div>
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="context-api-advanced" class="mt-5">Advanced Context API Usage</h3>

                        <pre><button class="copy-button">Copy</button><code class="language-jsx">{% raw %}
import React, { createContext, useContext, useReducer, useMemo } from 'react';

// Create multiple contexts
const UserContext = createContext();
const ThemeContext = createContext();
const NotificationContext = createContext();

// Complex reducer
const appReducer = (state, action) => {
  switch (action.type) {
    case 'SET_USER':
      return { ...state, user: action.payload };
    case 'SET_THEME':
      return { ...state, theme: action.payload };
    case 'ADD_NOTIFICATION':
      return { 
        ...state, 
        notifications: [...state.notifications, { 
          id: Date.now(), 
          ...action.payload 
        }] 
      };
    case 'REMOVE_NOTIFICATION':
      return { 
        ...state, 
        notifications: state.notifications.filter(
          notification => notification.id !== action.payload
        )
      };
    default:
      return state;
  }
};

// Combined provider
function AppProvider({ children }) {
  const [state, dispatch] = useReducer(appReducer, {
    user: null,
    theme: 'light',
    notifications: []
  });

  const contextValue = useMemo(() => ({
    state,
    dispatch
  }), [state]);

  return (
    <UserContext.Provider value={contextValue}>
      <ThemeContext.Provider value={contextValue}>
        <NotificationContext.Provider value={contextValue}>
          {children}
        </NotificationContext.Provider>
      </ThemeContext.Provider>
    </UserContext.Provider>
  );
}

// Custom hooks for each context
function useUser() {
  const context = useContext(UserContext);
  if (!context) throw new Error('useUser must be used within AppProvider');
  return { 
    user: context.state.user, 
    dispatch: context.dispatch 
  };
}

function useTheme() {
  const context = useContext(ThemeContext);
  if (!context) throw new Error('useTheme must be used within AppProvider');
  return { 
    theme: context.state.theme, 
    dispatch: context.dispatch 
  };
}

function useNotifications() {
  const context = useContext(NotificationContext);
  if (!context) throw new Error('useNotifications must be used within AppProvider');
  
  const addNotification = (notification) => {
    context.dispatch({ type: 'ADD_NOTIFICATION', payload: notification });
  };

  const removeNotification = (id) => {
    context.dispatch({ type: 'REMOVE_NOTIFICATION', payload: id });
  };

  return {
    notifications: context.state.notifications,
    addNotification,
    removeNotification
  };
}

// Usage in components
function Header() {
  const { theme } = useTheme();
  const { user } = useUser();

  return (
    <header className={theme}>
      <h1>My App</h1>
      {user && <p>Welcome, {user.name}</p>}
    </header>
  );
}

function NotificationSystem() {
  const { notifications, removeNotification } = useNotifications();

  return (
    <div className="notifications">
      {notifications.map(notification => (
        <div key={notification.id} className="notification">
          {notification.message}
          <button onClick={() => removeNotification(notification.id)}>
            ×
          </button>
        </div>
      ))}
    </div>
  );
}
{% endraw %}</code><button class="copy-button">Copy</button></pre>

                        <h3 id="conclusion" class="mt-5">Conclusion</h3>
                        <p>This comprehensive React documentation covers essential concepts from basics to advanced patterns. Remember that React is continuously evolving, so stay updated with the latest features and best practices. The key to mastering React is practice and building real-world applications.</p>
                        <p>Key takeaways:</p>
                        <ul>
                            <li>Components are the building blocks of React applications</li>
                            <li>Hooks provide powerful ways to manage state and side effects</li>
                            <li>Performance optimization is crucial for smooth user experience</li>
                            <li>Testing ensures reliability and prevents regressions</li>
                            <li>Following best practices leads to maintainable code</li>
                            <li>Advanced patterns help solve complex problems elegantly</li>
                        </ul>
                        <p>Continue learning by building projects, exploring the React ecosystem, and staying engaged with the React community. Happy coding!</p>

                        <div class="mt-5 text-center">
                            <a href="/practice" class="btn btn-primary btn-lg">Take Practice Test</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="animation-container-docs" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1;">
        </div>
    </section>

    <script>
        document.getElementById('search-input').addEventListener('input', function() {
            const query = this.value.toLowerCase();
            const content = document.getElementById('content');
            const elements = content.querySelectorAll('h2, h3, h4, p, pre');

            elements.forEach(element => {
                const text = element.textContent.toLowerCase();
                if (query === '' || text.includes(query)) {
                    element.style.display = '';
                } else {
                    element.style.display = 'none';
                }
            });
        });
    </script>
    <script>
        const copyButtons = document.querySelectorAll('.copy-button');
        copyButtons.forEach(button => {
            button.addEventListener('click', function() {
                const code = this.parentNode.querySelector('code').textContent;
                navigator.clipboard.writeText(code);
                this.textContent = 'Copied!';
                setTimeout(() => {
                    this.textContent = 'Copy';
                }, 2000);
            });
        });
    </script>
{% endblock %}